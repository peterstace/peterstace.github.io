<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="550px" preserveAspectRatio="none" style="width:765px;height:550px;background:#FFFFFF;" version="1.1" viewBox="0 0 765 550" width="765px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="138.2641" style="stroke:#181818;stroke-width:1.0;" width="10" x="49.5" y="46.2969"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="274.5" y="271.8938"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="508.5" y="184.561"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="508.5" y="359.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="54" x2="54" y1="36.2969" y2="514.8251"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="279.5" x2="279.5" y1="36.2969" y2="514.8251"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="36.2969" y2="514.8251"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="12" y="24.9951">Goroutine 1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="5" y="513.8251"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="12" y="533.8202">Goroutine 1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="230.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="237.5" y="24.9951">Goroutine 2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="230.5" y="513.8251"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="237.5" y="533.8202">Goroutine 2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="464" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="471" y="24.9951">Goroutine 3</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="464" y="513.8251"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="471" y="533.8202">Goroutine 3</text><rect fill="#FFFFFF" height="138.2641" style="stroke:#181818;stroke-width:1.0;" width="10" x="49.5" y="46.2969"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="274.5" y="271.8938"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="508.5" y="184.561"/><rect fill="#FFFFFF" height="87.3328" style="stroke:#181818;stroke-width:1.0;" width="10" x="508.5" y="359.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="59.5" x2="101.5" y1="83.0297" y2="83.0297"/><line style="stroke:#181818;stroke-width:1.0;" x1="101.5" x2="101.5" y1="83.0297" y2="96.0297"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="101.5" y1="96.0297" y2="96.0297"/><polygon fill="#181818" points="70.5,92.0297,60.5,96.0297,70.5,100.0297,66.5,96.0297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="66.5" y="62.3638">Add initial entries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="19" x="66.5" y="77.9638">via</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="89.5" y="77.4677">AddEntries(...)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="213.5" y="77.9638">method.</text><polygon fill="#181818" points="267.5,136.2953,277.5,140.2953,267.5,144.2953,271.5,140.2953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="59.5" x2="273.5" y1="140.2953" y2="140.2953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="66.5" y="120.0966">Launch goroutine</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="66.5" y="135.2294">(not scheduled immediately)</text><polygon fill="#181818" points="496.5,180.561,506.5,184.561,496.5,188.561,500.5,184.561" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54.5" x2="502.5" y1="184.561" y2="184.561"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="61.5" y="164.3622">Launch goroutine</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="61.5" y="179.495">(starts executing immediately)</text><line style="stroke:#181818;stroke-width:1.0;" x1="518.5" x2="560.5" y1="244.8938" y2="244.8938"/><line style="stroke:#181818;stroke-width:1.0;" x1="560.5" x2="560.5" y1="244.8938" y2="257.8938"/><line style="stroke:#181818;stroke-width:1.0;" x1="519.5" x2="560.5" y1="257.8938" y2="257.8938"/><polygon fill="#181818" points="529.5,253.8938,519.5,257.8938,529.5,261.8938,525.5,257.8938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="525.5" y="209.095">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="540.5" y="208.599">Net()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="584.5" y="209.095">method:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="525.5" y="224.6951">Call to</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="569.5" y="224.199">mu.RLock()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="653.5" y="224.6951">successfully</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="525.5" y="239.8279">acquires the lock in read-only mode.</text><line style="stroke:#181818;stroke-width:1.0;" x1="284.5" x2="326.5" y1="332.2266" y2="332.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="326.5" x2="326.5" y1="332.2266" y2="345.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="285.5" x2="326.5" y1="345.2266" y2="345.2266"/><polygon fill="#181818" points="295.5,341.2266,285.5,345.2266,295.5,349.2266,291.5,345.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="291.5" y="296.4279">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="96" x="306.5" y="295.9318">AddEntries()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="406.5" y="296.4279">method:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="291.5" y="312.0279">Call to</text><text fill="#FF0000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="72" x="335.5" y="311.5318">mu.Lock()</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="411.5" y="312.0279">blocks waiting</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="291.5" y="327.1607">on all readers to finish reading.</text><line style="stroke:#181818;stroke-width:1.0;" x1="518.5" x2="560.5" y1="419.5595" y2="419.5595"/><line style="stroke:#181818;stroke-width:1.0;" x1="560.5" x2="560.5" y1="419.5595" y2="432.5595"/><line style="stroke:#181818;stroke-width:1.0;" x1="519.5" x2="560.5" y1="432.5595" y2="432.5595"/><polygon fill="#181818" points="529.5,428.5595,519.5,432.5595,529.5,436.5595,525.5,432.5595" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="525.5" y="383.7607">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="540.5" y="383.2646">SumDebts()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="624.5" y="383.7607">method:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="525.5" y="399.3607">Call to</text><text fill="#FF0000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="569.5" y="398.8647">mu.RLock</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="637.5" y="399.3607">blocks waiting</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="525.5" y="414.4936">on all writers to finish writing.</text><path d="M232,459.5595 L232,499.5595 L559,499.5595 L559,469.5595 L549,459.5595 L232,459.5595 " fill="#FFB6C1" style="stroke:#181818;stroke-width:0.5;"/><path d="M549,459.5595 L549,469.5595 L559,469.5595 L549,459.5595 " fill="#FFB6C1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="239.25" y="476.6264">Goroutines 2 and 3 are deadlocked.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="239.25" y="491.7592">They are both waiting on the other to progress.</text><!--MD5=[d34aab359b1c74b797432ec5aff0de15]
@startuml
participant "Goroutine 1" as G1
participant "Goroutine 2" as G2
participant "Goroutine 3" as G3


activate G1
G1 -> G1: Add initial entries\nvia ""AddEntries(...)"" method.
G1 -> G2: Launch goroutine\n(not scheduled immediately)
G1 -> G3: Launch goroutine\n(starts executing immediately)
deactivate G1

activate G3
G3 -> G3: In ""Net()"" method:\nCall to ""mu.RLock()"" successfully\nacquires the lock in read-only mode.
G3 -[hidden]-> G1
deactivate G3

activate G2
G2 -> G2: In ""AddEntries()"" method:\n<color:red>Call to ""mu.Lock()"" blocks waiting\n<color:red>on all readers to finish reading.
G2 -[hidden]-> G1
deactivate G2

activate G3
G3 -> G3: In ""SumDebts()"" method:\n<color:red>Call to ""mu.RLock"" blocks waiting\n<color:red>on all writers to finish writing.
G3 -[hidden]-> G1
deactivate G3

note over G2, G3 #lightpink: Goroutines 2 and 3 are deadlocked.\nThey are both waiting on the other to progress.
@enduml

PlantUML version 1.2022.10beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
