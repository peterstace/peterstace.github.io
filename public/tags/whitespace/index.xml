<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Whitespace on Much Ado About Much</title>
    <link>http://localhost:1313/tags/whitespace/</link>
    <description>Recent content in Whitespace on Much Ado About Much</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>peterstace@gmail.com (Peter Stace)</managingEditor>
    <webMaster>peterstace@gmail.com (Peter Stace)</webMaster>
    <copyright>(c) Peter Stace</copyright>
    <lastBuildDate>Tue, 02 Jun 2015 22:00:15 +1100</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/whitespace/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Go, gofmt, and diffs</title>
      <link>http://localhost:1313/2015/06/02/go-gofmt-and-diffs/</link>
      <pubDate>Tue, 02 Jun 2015 22:00:15 +1100</pubDate>
      <author>peterstace@gmail.com (Peter Stace)</author>
      <guid>http://localhost:1313/2015/06/02/go-gofmt-and-diffs/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://golang.org/cmd/gofmt/&#34;&gt;Gofmt&lt;/a&gt; is a Go program formatter. Its universal
adoption by the Go community has resulted in a consistent formatting style
among most if not all Go source code.&lt;/p&gt;

&lt;p&gt;When making changes to Go code, gofmt sometimes causes changes to lines of code
that weren&amp;rsquo;t originally modified. This can done for example to keep indentation
consistent. This can make diffs hard to read.&lt;/p&gt;

&lt;p&gt;For example, the following is a diff of a simple
&lt;a href=&#34;https://golang.org/ref/spec#Type_declarations&#34;&gt;type declaration&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ git diff
diff --git a/main.go b/main.go
index 2c7af41..d9e59cd 100644
--- a/main.go
+++ b/main.go
@@ -1,13 +1,12 @@
 type foo struct {
-    jabberwocky  int
-    quux         complex128
-    galumphing   string
-    vorpal       float64
-    bandersnatch float64
-    mimsy        struct {
-        beaming  int
-        tumtummy string
-        brillig  float64
+    jabberwocky int
+    quux        complex64
+    tumtummy    string
+    galumphing  string
+    vorpal      float64
+    mimsy       struct {
+        beaming int
+        brillig float64
     }
 }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Because gofmt has rewritten the source code to have consistent indentation, at
least a whitespace change has been made to every line. It can be hard to see
what the &lt;em&gt;real&lt;/em&gt; change is.&lt;/p&gt;

&lt;p&gt;To see the real changes, the diff algorithm should be configured to ignore
whitespace. The diff below makes it quite obvious what the actual change is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ git diff -b
diff --git a/main.go b/main.go
index 2c7af41..d9e59cd 100644
--- a/main.go
+++ b/main.go
@@ -1,12 +1,11 @@
 type foo struct {
     jabberwocky int
-    quux         complex128
+    quux        complex64
+    tumtummy    string
     galumphing  string
     vorpal      float64
-    bandersnatch float64
     mimsy       struct {
         beaming int
-        tumtummy string
         brillig float64
     }
 }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It&amp;rsquo;s now quite clear that &lt;code&gt;quux&lt;/code&gt; has had its type modified, &lt;code&gt;bandersnatch&lt;/code&gt; has
been removed, and &lt;code&gt;tumtummy&lt;/code&gt; has been moved from the inner struct, to the outer
struct.&lt;/p&gt;

&lt;p&gt;This type of diff can typically be created by passing the
&lt;code&gt;--ignore-space-change&lt;/code&gt; flag (the short version is &lt;code&gt;-b&lt;/code&gt;). This works with Git,
Mercurial, Subversion, and well as the &lt;code&gt;diff&lt;/code&gt; command that comes with
&lt;code&gt;diffutils&lt;/code&gt;.  GUI based diffs such as those &lt;a href=&#34;https://github.com/blog/967-github-secrets&#34;&gt;produced by
Github&lt;/a&gt; will typically have an
ignore-whitespace option as well.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>